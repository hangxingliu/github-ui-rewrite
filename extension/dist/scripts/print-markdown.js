"use strict";(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a;}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r);},p,p.exports,r,e,n,t);}return n[i].exports;}for(var u="function"==typeof require&&require,i=0;i<t.length;i++){o(t[i]);}return o;}return r;})()({1:[function(require,module,exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.$mustExist=$mustExist;exports.$=$;exports.$atLeastOne=$atLeastOne;exports.$$=$$;exports.log=log;exports.warn=warn;var LOG_PREFIX=exports.LOG_PREFIX='Github UI Rewrite:';function $mustExist(selector){var parent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;var $dom=$(selector,parent);if(!$dom)warn('`'+selector+'` is missing!');return $dom;}function $(selector){var parent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;return parent.querySelector(selector);}function $atLeastOne(selectors){var parent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;var $elements=selectors.map(function(selector){return $(selector,parent);}).filter(function(it){return it;});if($elements.length===0)warn(selectors.map(function(it){return'`'+it+'`';})+' are missing!');return $elements[0];}function $$(selector){var parent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;return Array.prototype.slice.call(parent.querySelectorAll(selector));}function log(ctx){console.log(LOG_PREFIX+' '+ctx);}function warn(ctx){console.warn(LOG_PREFIX+' '+ctx);}},{}],2:[function(require,module,exports){"use strict";var _utils=require("./_utils");var _settings=require("../settings-page/settings");document.addEventListener('DOMContentLoaded',function(){(0,_settings.loadSettings)(function(settings){if(settings.addPdfPrintButton){steupForPrintMarkdown();}});});var btnClass='btn-from-extension-for-print-pdf';var inited=false;function steupForPrintMarkdown(){if(inited)return;inited=true;(0,_utils.log)('steupForPrintMarkdown');setup();var $listen=(0,_utils.$mustExist)('#js-repo-pjax-container');if($listen){var lastUpdate=0;var listener=new MutationObserver(function(list){(0,_utils.log)("#js-repo-pjax-container changed!");var now=Date.now();if(now<lastUpdate+500)return;lastUpdate=now;setup();});listener.observe($listen,{childList:true});(0,_utils.log)("start listen #js-repo-pjax-container DOM change");}function setup(){var $readme=(0,_utils.$)('#readme');if(!$readme)return;var $oldButton=(0,_utils.$)("."+btnClass);if($oldButton)return;var $bar=(0,_utils.$)('.file-actions');if($bar){var $before=(0,_utils.$)('a.btn-octicon, button.btn-octicon',$bar);if(!$before)return;var $button=createButton(onClick.bind(this,{}));$before.parentNode.insertBefore($button,$before);}else{var $appendBar=(0,_utils.$mustExist)('h3',$readme);if(!$appendBar)return;var _$button=createButton(onClick.bind(this,{repoReademe:true}));_$button.setAttribute('style','position:absolute;top:-5px;right:5px');$appendBar.style.position='relative';$appendBar.appendChild(_$button);}}function onClick(options,event){event.preventDefault();var $markdownTitle=(0,_utils.$)('#readme h1');var printTitle=$markdownTitle?$markdownTitle.innerText:document.title;var printDialog=window.open('',printTitle,'height=794,width=1123');var printDocument=printDialog.document;printDocument.write(document.documentElement.innerHTML);printDocument.close();printDialog.addEventListener('DOMContentLoaded',prepareForPrint);printDialog.addEventListener('load',ok2print);printDialog.focus();function prepareForPrint(){(0,_utils.log)("prepare for print (title: "+JSON.stringify(printTitle)+")");document.title=printTitle;var $body=(0,_utils.$)('body',printDocument);var $printReadme=(0,_utils.$)('#readme',printDocument);if(options.repoReademe){var $h3=(0,_utils.$)('#readme > h3',printDocument);if($h3)$printReadme.removeChild($h3);}$body.setAttribute('style','min-width: inherit');$printReadme.setAttribute('style','background-color:white');(0,_utils.$)('#readme>article',printDocument).setAttribute('style','border: none');$body.innerHTML=$printReadme.outerHTML;}function ok2print(){(0,_utils.log)("OK to print");printDialog.print();printDialog.close();}}}function createButton(onClick){var icon="<svg class=\"octicon octicon-file-pdf\" viewBox=\"0 0 12 16\" version=\"1.1\" width=\"12\" height=\"16\" aria-hidden=\"true\">\n\t\t<path fill-rule=\"evenodd\" d=\"M8.5 1H1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V4.5L8.5 1zM1 2h4a.68.68 0 0 0-.31.2 1.08 1.08 0 0 0-.23.47 4.22 4.22 0 0 0-.09 1.47c.06.609.173 1.211.34 1.8A21.78 21.78 0 0 1 3.6 8.6c-.5 1-.8 1.66-.91 1.84a7.161 7.161 0 0 0-.69.3 4.19 4.19 0 0 0-1 .64V2zm4.42 4.8a5.65 5.65 0 0 0 1.17 2.09c.275.237.595.417.94.53-.64.09-1.23.2-1.81.33a12.22 12.22 0 0 0-1.81.59c-.587.243.22-.44.61-1.25.365-.74.67-1.51.91-2.3l-.01.01zM11 14H1.5a.743.743 0 0 1-.17 0 2.12 2.12 0 0 0 .73-.44 10.14 10.14 0 0 0 1.78-2.38c.31-.13.58-.23.81-.31l.42-.14c.45-.13.94-.23 1.44-.33s1-.16 1.48-.2c.447.216.912.394 1.39.53.403.11.814.188 1.23.23h.38V14H11zm0-4.86a3.74 3.74 0 0 0-.64-.28 4.22 4.22 0 0 0-.75-.11c-.411.003-.822.03-1.23.08a3 3 0 0 1-1-.64 6.07 6.07 0 0 1-1.29-2.33c.111-.662.178-1.33.2-2 .02-.25.02-.5 0-.75a1.05 1.05 0 0 0-.2-.88.82.82 0 0 0-.61-.23H8l3 3v4.14z\">\n\t\t</path>\n\t</svg>";var button=document.createElement('a');button.setAttribute('href','javascript:;');button.setAttribute("class","btn-octicon tooltipped tooltipped-nw "+btnClass);button.setAttribute('style','margin-left:5px;margin-right:3px');button.setAttribute('aria-label','Print this file as PDF');button.innerHTML=icon;button.addEventListener('click',onClick);return button;}},{"../settings-page/settings":3,"./_utils":1}],3:[function(require,module,exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultSettings=getDefaultSettings;exports.loadSettings=loadSettings;exports.encodeSettings=encodeSettings;exports.decodeSettings=decodeSettings;function getDefaultSettings(){return{betterRepositoriesCard:true,addPdfPrintButton:true,disableNewJumpSearch:false};}var settingsStorageKey=exports.settingsStorageKey='settings';function loadSettings(onLoad){chrome.storage.sync.get([settingsStorageKey],function(storage){var defaultSettings=getDefaultSettings();var settings=decodeSettings(storage[settingsStorageKey]);onLoad(Object.assign({},defaultSettings,settings));});}function encodeSettings(settings){return JSON.stringify(settings);}function decodeSettings(json){try{return JSON.parse(json);}catch(ex){return{};}}},{}]},{},[2]);