"use strict";(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a;}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r);},p,p.exports,r,e,n,t);}return n[i].exports;}for(var u="function"==typeof require&&require,i=0;i<t.length;i++){o(t[i]);}return o;}return r;})()({1:[function(require,module,exports){'use strict';var _settings2=require('./settings');function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}window.addEventListener('load',main);function main(){var defaultSettings=(0,_settings2.getDefaultSettings)();var settings={};$('#btnRefresh').addEventListener('click',refreshSettings.bind(this,{}));$('#btnReset').addEventListener('click',function(){chrome.storage.sync.clear(function(){refreshSettings({showMessage:false});showStatus('warning','settings be reset');});});refreshSettings({isInitialized:true});function refreshSettings(_ref){var _ref$isInitialized=_ref.isInitialized,isInitialized=_ref$isInitialized===undefined?false:_ref$isInitialized,_ref$showMessage=_ref.showMessage,showMessage=_ref$showMessage===undefined?true:_ref$showMessage;(0,_settings2.loadSettings)(function(_settings){settings=_settings;console.log('loaded settings:',settings);var loaded=0;$$('.settings-checkbox').forEach(function(el){var key=el.getAttribute('data-key');if(!(key in defaultSettings)){el.setAttribute('disabled','disabled');return;}var value=settings[key];if(value)el.setAttribute('checked','checked');else el.removeAttribute('checked');if(isInitialized)el.addEventListener('change',saveSettings);loaded++;});if(showMessage)showStatus('info','Loaded  '+loaded+' settings from storage!');});}function saveSettings(event){var el=event.target;var key=el.getAttribute('data-key');var value=el.checked;if(!(key in defaultSettings)){showStatus('danger','Unknown setting: '+key);return;}console.log('settings: '+key+' => '+value);settings[key]=value;console.log(settings);chrome.storage.sync.set(_defineProperty({},_settings2.settingsStorageKey,(0,_settings2.encodeSettings)(settings)),function(){showStatus('success','set '+key+' to '+value);refreshSettings({showMessage:false});});}function $(selector){var parent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;return parent.querySelector(selector);}function $$(selector){var parent=arguments.length>1&&arguments[1]!==undefined?arguments[1]:document;return Array.prototype.slice.call(parent.querySelectorAll(selector));}function showStatus(){var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'success';var msg=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var bar=$('#statusBar');bar.className=bar.className.replace(/alert-\w+\s*/,'')+(' alert-'+type);bar.innerText=msg;bar.style.display='block';}}},{"./settings":2}],2:[function(require,module,exports){'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.getDefaultSettings=getDefaultSettings;exports.loadSettings=loadSettings;exports.encodeSettings=encodeSettings;exports.decodeSettings=decodeSettings;function getDefaultSettings(){return{betterRepositoriesCard:true,addPdfPrintButton:true,disableNewJumpSearch:false};}var settingsStorageKey=exports.settingsStorageKey='settings';function loadSettings(onLoad){chrome.storage.sync.get([settingsStorageKey],function(storage){var defaultSettings=getDefaultSettings();var settings=decodeSettings(storage[settingsStorageKey]);onLoad(Object.assign({},defaultSettings,settings));});}function encodeSettings(settings){return JSON.stringify(settings);}function decodeSettings(json){try{return JSON.parse(json);}catch(ex){return{};}}},{}]},{},[1]);